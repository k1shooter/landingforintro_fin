<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>금융 동화 | AI 기반 금융 리터러시</title>
    <meta
      name="description"
      content="어려운 금융 개념을 동화·일러스트·음성으로 쉽게 전달하는 AI 서비스"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0b1020;
        --panel: #121730;
        --muted: #8fa1c7;
        --text: #eef1ff;
        --brand: #6ea8ff;
        --brand-2: #a5f3fc;
        --ok: #22c55e;
        --warn: #f59e0b;
        --danger: #ef4444;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        --radius: 16px;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: 'Pretendard', 'Apple SD Gothic Neo', system-ui,
          -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Noto Sans KR',
          'Noto Color Emoji', sans-serif;
        background: radial-gradient(
            60% 40% at 20% 0%,
            rgba(110, 168, 255, 0.15),
            transparent 60%
          ),
          radial-gradient(
            50% 30% at 80% 10%,
            rgba(165, 243, 252, 0.12),
            transparent 70%
          ),
          linear-gradient(180deg, #0a0f1e 0%, #0f1630 100%);
        color: var(--text);
        line-height: 1.6;
      }
      a {
        color: inherit;
        text-decoration: none;
      }
      .container {
        width: min(1200px, 92%);
        margin-inline: auto;
      }
      header {
        position: sticky;
        top: 0;
        z-index: 50;
        backdrop-filter: blur(10px);
        background: linear-gradient(
          180deg,
          rgba(10, 15, 30, 0.9),
          rgba(10, 15, 30, 0.4)
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }
      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 0;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 800;
        letter-spacing: 0.3px;
      }
      .logo {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--brand), var(--brand-2));
        box-shadow: var(--shadow);
      }
      .nav ul {
        display: flex;
        gap: 18px;
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .nav a {
        padding: 8px 12px;
        border-radius: 10px;
        color: var(--muted);
      }
      .nav a:hover,
      .nav a.active {
        color: var(--text);
        background: rgba(255, 255, 255, 0.06);
      }
      .hero {
        display: grid;
        grid-template-columns: 1.25fr 1fr;
        gap: 40px;
        align-items: center;
        padding: 64px 0 40px;
      }
      .badge {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(110, 168, 255, 0.12);
        color: var(--brand);
        font-weight: 700;
        font-size: 12px;
        letter-spacing: 0.3px;
      }
      .title {
        font-size: clamp(28px, 5vw, 56px);
        line-height: 1.1;
        margin: 12px 0 12px;
        font-weight: 800;
      }
      .subtitle {
        color: var(--muted);
        font-size: clamp(14px, 2.2vw, 18px);
      }
      .cta {
        display: flex;
        gap: 12px;
        margin-top: 24px;
      }
      .btn {
        padding: 12px 16px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: #192246;
        color: var(--text);
        font-weight: 700;
        box-shadow: var(--shadow);
        cursor: pointer;
      }
      .btn.primary {
        background: linear-gradient(135deg, var(--brand), #7cc5ff);
        color: #061225;
      }
      .btn.ghost {
        background: transparent;
      }
      .hero-card {
        background: linear-gradient(180deg, #11193a, #0e1533);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 20px;
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .hero-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .chip {
        font-size: 12px;
        color: var(--muted);
      }
      section {
        padding: 80px 0;
      }
      h2 {
        font-size: clamp(22px, 3.4vw, 32px);
        margin: 0 0 14px;
        font-weight: 800;
      }
      .lead {
        color: var(--muted);
        margin-bottom: 28px;
      }
      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 28px;
      }
      .grid-3 {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }
      .card {
        background: linear-gradient(180deg, #101737, #0c1330);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        padding: 18px;
        box-shadow: var(--shadow);
      }
      .card h3 {
        margin: 0 0 8px;
        font-size: 18px;
      }
      .card p {
        margin: 0;
        color: var(--muted);
      }
      .gallery {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
      }
      .story-card {
        cursor: pointer;
        background: #10173a;
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: var(--shadow);
      }
      .story-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }
      .story-card img {
        width: 100%;
        aspect-ratio: 16 / 10;
        object-fit: cover;
        display: block;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .story-card .title-area {
        padding: 14px 16px;
        font-weight: 800;
        font-size: 15px;
        color: var(--panel);
        background: var(--muted);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      footer {
        padding: 40px 0;
        color: #a7b3d9;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
      }
      .em {
        color: var(--brand);
        font-weight: 700;
      }
      .row {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      @media (max-width: 980px) {
        .hero,
        .grid-2,
        .grid-3,
        .gallery {
          grid-template-columns: 1fr;
        }
        .nav ul {
          display: none;
        }
      }
      @media (max-width: 560px) {
        .gallery {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container nav">
        <div class="brand">
          <div class="logo"></div>
          금융 동화
        </div>
        <nav>
          <ul>
            <li><a href="#poc">PoC 데모</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <main>
      <section class="hero container" id="top">
        <div>
          <span class="badge">AI 기반 금융 리터러시</span>
          <h1 class="title">
            어려운 금융을 <span class="em">동화·일러스트·음성</span>으로 쉽게
          </h1>
          <p class="subtitle">
            시니어·사회초년생·어린이를 위해 복잡한 금융 개념을 스토리텔링으로
            자동 제작하는 혁신 서비스
          </p>
          <div class="cta">
            <a class="btn primary" href="#poc">PoC 데모 바로가기</a>
          </div>
        </div>
        <div class="hero-card">
          <div class="hero-grid">
            <div class="card">
              <h3>동화 공장</h3>
              <p class="chip">약관·사기사례·법규 → 스토리 자동 변환</p>
            </div>
            <div class="card">
              <h3>개인화</h3>
              <p class="chip">연령/상황 기반 맞춤 추천</p>
            </div>
            <div class="card">
              <h3>멀티미디어</h3>
              <p class="chip">텍스트+일러스트+음성 나레이션</p>
            </div>
            <div class="card">
              <h3>확장성</h3>
              <p class="chip">신규 문서 추가로 즉시 학습</p>
            </div>
          </div>
        </div>
      </section>
      <section id="poc">
        <div class="container">
          <h2>PoC 데모 — AI 생성 동화 목록</h2>
          <p class="lead">
            AI가 생성한 금융 동화 목록입니다. 카드를 클릭하여 데모를 확인해
            보세요.
          </p>
          <div class="gallery mt-8"></div>
        </div>
      </section>
    </main>
    <footer>
      <div class="container">
        <div>© <span id="year"></span> 금융 동화</div>
      </div>
    </footer>

    <dialog
      id="demo-modal"
      style="
        border: none;
        border-radius: 16px;
        padding: 0;
        max-width: 860px;
        width: 96%;
        background: #0b122c;
        color: var(--text);
      "
    >
      <div style="padding: 18px 18px 0" class="row">
        <b>동화 데모</b>
        <span
          id="scene-indicator"
          style="margin-left: 1rem; opacity: 0.7"
        ></span>
        <button id="close-demo" class="btn ghost" style="margin-left: auto">
          닫기
        </button>
      </div>
      <div style="padding: 0 18px 18px">
        <div class="card" style="margin-top: 12px">
          <div class="grid-2" style="align-items: center; gap: 24px">
            <div>
              <img
                id="scene-img"
                alt="scene image"
                style="
                  width: 100%;
                  height: auto;
                  border-radius: 12px;
                  border: 1px solid rgba(255, 255, 255, 0.06);
                "
              />
            </div>
            <div>
              <h3 id="scene-title">장면</h3>
              <p id="scene-subtitle" style="opacity: 0.8; min-height: 80px">
                자막 로딩 중…
              </p>
              <audio
                id="tts"
                controls
                style="width: 100%; margin-top: 10px"
              ></audio>
              <div class="row mt-4">
                <button class="btn" id="prev">◀ 이전</button>
                <button class="btn" id="next">다음 ▶</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </dialog>

    <script>
      document.querySelectorAll('a[href^="#"]').forEach((a) => {
        a.addEventListener('click', (e) => {
          const id = a.getAttribute('href');
          const el = document.querySelector(id);
          if (el) {
            e.preventDefault();
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

      const modal = document.getElementById('demo-modal');
      const closeBtn = document.getElementById('close-demo');
      const audio = document.getElementById('tts');
      const imgEl = document.getElementById('scene-img');
      const subtitleEl = document.getElementById('scene-subtitle');
      const titleEl = document.getElementById('scene-title');
      const idxEl = document.getElementById('scene-indicator');
      const prevBtn = document.getElementById('prev');
      const nextBtn = document.getElementById('next');
      const gallery = document.querySelector('.gallery');

      let currentStoryId = null;
      let currentSceneIndex = 0;
      const TOTAL_SCENES = 7;

      async function loadScene(storyId, sceneIndex) {
        const sceneNum = sceneIndex + 1;
        currentStoryId = storyId;
        currentSceneIndex = sceneIndex;
        titleEl.textContent = `장면 ${sceneNum}`;
        idxEl.textContent = `${sceneNum} / ${TOTAL_SCENES}`;

        const basePath = `./stories/${storyId}/`;
        const imagePath = `${basePath}scene_${sceneNum}_image.png`;
        const audioPath = `${basePath}scene_${sceneNum}_audio.mp3`;
        const subtitlePath = `${basePath}scene_${sceneNum}_subtitle.txt`;

        imgEl.src = imagePath;
        audio.src = audioPath;
        audio.load();

        try {
          const response = await fetch(subtitlePath);
          subtitleEl.textContent = response.ok
            ? await response.text()
            : '자막 파일이 없습니다.';
        } catch (e) {
          subtitleEl.textContent = '자막을 불러오는 데 실패했습니다.';
        }
      }

      async function loadStories() {
        try {
          const response = await fetch('./stories/stories.json');
          const stories = await response.json();
          gallery.innerHTML = '';
          if (stories.length === 0) {
            gallery.innerHTML =
              '<p>생성된 이야기가 없습니다. 먼저 `python build.py`를 실행해주세요.</p>';
            return;
          }
          stories.forEach((story) => {
            const cardEl = document.createElement('div');
            cardEl.className = 'story-card';
            const imgEl = document.createElement('img');
            imgEl.src = `./stories/${story.cover_image}`;
            imgEl.alt = story.title;
            const titleAreaEl = document.createElement('div');
            titleAreaEl.className = 'title-area';
            titleAreaEl.textContent = story.title;
            cardEl.appendChild(imgEl);
            cardEl.appendChild(titleAreaEl);
            cardEl.addEventListener('click', () => {
              modal.showModal();
              loadScene(story.id, 0);
            });
            gallery.appendChild(cardEl);
          });
        } catch (error) {
          gallery.innerHTML =
            '<p>이야기 목록을 불러오는 데 실패했습니다. `python build.py`를 실행했는지 확인해주세요.</p>';
          console.error('Error fetching stories:', error);
        }
      }

      closeBtn.addEventListener('click', () => modal.close());
      prevBtn.addEventListener('click', () => {
        const newIndex = (currentSceneIndex - 1 + TOTAL_SCENES) % TOTAL_SCENES;
        loadScene(currentStoryId, newIndex);
      });
      nextBtn.addEventListener('click', () => {
        const newIndex = (currentSceneIndex + 1) % TOTAL_SCENES;
        loadScene(currentStoryId, newIndex);
      });
      document.addEventListener('DOMContentLoaded', loadStories);
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </body>
</html>
